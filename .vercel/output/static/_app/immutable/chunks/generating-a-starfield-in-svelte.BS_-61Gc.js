import{a as r,t as i}from"./disclose-version.CaJuVmJL.js";import{h as p,i as D,B as m,g as C,E as u,D as F,K as b,U as B,m as h,v as y,ao as f,s as A,c as t,r as c,f as E,A as g}from"./index-client.COie2tS9.js";import{d as w}from"./render.3nspZuyd.js";import{S as x}from"./StarField.CrZEkz3F.js";function v(a,s,n){p&&D();var e=a,o=B,l;m(()=>{C(o,o=s())&&(l&&u(l),l=F(()=>n(e)))}),p&&(e=b)}var _=(a,s)=>h(s,y(s)+1),k=i('<div class="comp svelte-1efek6m"><div class="starfield svelte-1efek6m"><!></div> <button>Rerender & Randomize</button></div>');function S(a){let s=f(0);var n=k(),e=t(n),o=t(e);v(o,()=>y(s),d=>{x(d,{})}),c(e);var l=A(e,2);l.__click=[_,s],c(n),r(a,n)}w(["click"]);const N={title:"Generating a Randomized Starfield in SvelteKit",description:"An overview of how I generate the random starfield backgrounds on this site using SvelteKit SSR.",date:"2024-8-24",categories:["sveltekit","svelte 5","frontend","typescript"],published:!0};var I=i(`<blockquote><p>“There was a special kind of silence in the void, the kind that you could never feel
anywhere else. During a spacewalk, that silence seeped into your bones and made you feel
like the smallest thing in the universe.”</p> <p><a href="https://en.wikipedia.org/wiki/Cibola_Burn">Cibola Burn (The Expanse, Book 4)</a></p></blockquote> <h2 id="so-you-wanna-go-to-space"><a aria-hidden="true" tabindex="-1" href="#so-you-wanna-go-to-space"><span class="icon icon-link"></span></a>So, you wanna go to space?</h2> <p>Welcome to my blog! As a lover of space-themed art, sci-fi books, and games, I wanted to
kick off this site with something I recently built: a starfield component. This post might
have more information than necessary, but I’m learning to write more, so bear with me. If
you’d rather dive into the code, my whole site is <a href="https://github.com/StephenGunn/jovian">open-source</a>. Feel free to skip the writeup and
explore the code there if that’s more your style.</p> <h2 id=""></h2> <p>Since this is the first post on this site, written in markdown, I wanted to cover
something fresh that I just completed. The starfield component for this site is simple but
has some advanced quirks to ensure it always looks good. I figured it would be the perfect
topic for this first post.</p> <h2 id="in-practice"><a aria-hidden="true" tabindex="-1" href="#in-practice"><span class="icon icon-link"></span></a>In Practice</h2> <p>In a starfield, minimalism is key—too many stars can quickly become overwhelming.</p> <!> <p>Here’s the starfield in action. We’ll dive into how it’s made shortly, but first, let’s
touch on the concept. The starfield uses a random number generator to create more small
stars than big ones. This keeps it clean and perhaps a bit more realistic. We also ensure
big stars don’t overlap, keeping the design clean and visually appealing.</p> <h2 id="the-components"><a aria-hidden="true" tabindex="-1" href="#the-components"><span class="icon icon-link"></span></a>The Components</h2> <p>The starfield is made up of two components: the <code>Starfield.svelte</code> and the <code>Star.svelte</code>.
The <code>Starfield.svelte</code> component generates the stars and renders them on the screen, while
the <code>Star</code> component is responsible for rendering an individual star.</p> <h3 id="the-star-component"><a aria-hidden="true" tabindex="-1" href="#the-star-component"><span class="icon icon-link"></span></a>The Star Component</h3> <p>The <code>Star.svelte</code> component is a simple SVG that can accept a size, position, and opacity
as props. The SVG shape was made in <a href="https://inkscape.org/">Inkscape</a> and then copied into
the component.</p> <div class="rehype-code-title"><span>Star.svelte</span><button class="copy">Copy</button></div><pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">script</span><span style="color:#EED49F"> lang</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"ts"</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#C6A0F6">  const</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#CAD3F5">    size </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> "1rem"</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="4"><span style="color:#CAD3F5">    left </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> "0%"</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="5"><span style="color:#CAD3F5">    top </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> "0%"</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="6"><span style="color:#CAD3F5">    opacity </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 1</span></span>
<span class="code-line numbered-code-line" data-line-number="7"><span style="color:#939AB7">  &#125;</span><span style="color:#8BD5CA">:</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="8"><span style="color:#CAD3F5;font-style:italic">    size</span><span style="color:#8BD5CA">?:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="9"><span style="color:#CAD3F5;font-style:italic">    left</span><span style="color:#8BD5CA">?:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="10"><span style="color:#CAD3F5;font-style:italic">    top</span><span style="color:#8BD5CA">?:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="11"><span style="color:#CAD3F5;font-style:italic">    opacity</span><span style="color:#8BD5CA">?:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="12"><span style="color:#939AB7">  &#125;</span><span style="color:#8BD5CA"> =</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">props</span><span style="color:#CAD3F5">()</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="13"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">script</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="14"></span>
<span class="code-line numbered-code-line" data-line-number="15"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">svg</span></span>
<span class="code-line numbered-code-line" data-line-number="16"><span style="color:#EED49F">  style</span><span style="color:#C6A0F6">:</span><span style="color:#EE99A0;font-style:italic">left</span></span>
<span class="code-line numbered-code-line" data-line-number="17"><span style="color:#EED49F">  style</span><span style="color:#C6A0F6">:</span><span style="color:#EE99A0;font-style:italic">top</span></span>
<span class="code-line numbered-code-line" data-line-number="18"><span style="color:#EED49F">  style</span><span style="color:#C6A0F6">:</span><span style="color:#EE99A0;font-style:italic">opacity</span></span>
<span class="code-line numbered-code-line" data-line-number="19"><span style="color:#EED49F">  style</span><span style="color:#C6A0F6">:</span><span style="color:#EED49F;font-style:italic">width</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="20"><span style="color:#EED49F">  style</span><span style="color:#C6A0F6">:</span><span style="color:#EED49F;font-style:italic">height</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="21"><span style="color:#EED49F">  style</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"position: absolute; z-index: 1;"</span></span>
<span class="code-line numbered-code-line" data-line-number="22"><span style="color:#EED49F">  viewBox</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"0 0 50 50"</span></span>
<span class="code-line numbered-code-line" data-line-number="23"><span style="color:#EED49F">  version</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"</span><span style="color:#F5A97F">1.1</span><span style="color:#A6DA95">"</span></span>
<span class="code-line numbered-code-line" data-line-number="24"><span style="color:#EED49F">  xmlns</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"http://www.w3.org/2000/svg"</span></span>
<span class="code-line numbered-code-line" data-line-number="25"><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="26"><span style="color:#8BD5CA">  &#x3C;</span><span style="color:#8AADF4">path</span></span>
<span class="code-line numbered-code-line" data-line-number="27"><span style="color:#EED49F">    style</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"fill:#fff;stroke:#fff;stroke-width:0;stroke-linejoin:round;paint-order:fill markers stroke"</span></span>
<span class="code-line numbered-code-line" data-line-number="28"><span style="color:#EED49F">    id</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"path1"</span></span>
<span class="code-line numbered-code-line" data-line-number="29"><span style="color:#EED49F">    d</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"m 14.180657,31.334797 c -1.653717,0 -4.6075584,-13.07614 -5.7769132,-14.245495 C 7.234389,15.919948 -5.8417511,12.966107 -5.8417511,11.31239 c 0,-1.6537175 13.0761399,-4.6075584 14.2454946,-5.7769132 1.1693548,-1.1693548 4.1231955,-14.2454949 5.7769125,-14.245495 1.653717,0 4.607558,13.0761399 5.776913,14.2454947 1.169355,1.1693547 14.245495,4.123195 14.245495,5.7769125 0,1.653717 -13.07614,4.607558 -14.245495,5.776913 -1.169354,1.169355 -4.123195,14.245495 -5.776912,14.245495 z"</span></span>
<span class="code-line numbered-code-line" data-line-number="30"><span style="color:#EED49F">    transform</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"translate(10.819344,13.687611)"</span></span>
<span class="code-line numbered-code-line" data-line-number="31"><span style="color:#8BD5CA">  /></span></span>
<span class="code-line numbered-code-line" data-line-number="32"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">svg</span><span style="color:#8BD5CA">></span></span></code></pre> <h3 id="the-starfield-component"><a aria-hidden="true" tabindex="-1" href="#the-starfield-component"><span class="icon icon-link"></span></a>The Starfield Component</h3> <p>The <code>Starfield.svelte</code> is a bit more complex, so I will post the whole thing and then
break down the sections and give justifications for the choices made.</p> <div class="rehype-code-title"><span>Starfield.svelte</span><button class="copy">Copy</button></div><pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">script</span><span style="color:#EED49F"> lang</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"ts"</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#C6A0F6">  import</span><span style="color:#939AB7"> &#123;</span><span style="color:#CAD3F5"> browser </span><span style="color:#939AB7">&#125;</span><span style="color:#C6A0F6"> from</span><span style="color:#A6DA95"> "$app/environment"</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#C6A0F6">  import</span><span style="color:#CAD3F5"> Star </span><span style="color:#C6A0F6">from</span><span style="color:#A6DA95"> "./Star.svelte"</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="4"></span>
<span class="code-line numbered-code-line" data-line-number="5"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> width</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#8BD5CA"> =</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">state</span><span style="color:#CAD3F5">(</span><span style="color:#F5A97F">0</span><span style="color:#CAD3F5">)</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="6"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> height</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#8BD5CA"> =</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">state</span><span style="color:#CAD3F5">(</span><span style="color:#F5A97F">0</span><span style="color:#CAD3F5">)</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="7"></span>
<span class="code-line numbered-code-line" data-line-number="8"><span style="color:#6E738D;font-style:italic">  // we want to serverside render the starfield</span></span>
<span class="code-line numbered-code-line" data-line-number="9"><span style="color:#6E738D;font-style:italic">  // we will render more stars than we need to, on the server, so we don't have to wait for the</span></span>
<span class="code-line numbered-code-line" data-line-number="10"><span style="color:#6E738D;font-style:italic">  // window dimensions to be available to generate the dom elements</span></span>
<span class="code-line numbered-code-line" data-line-number="11"><span style="color:#C6A0F6">  let</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="12"><span style="color:#CAD3F5">    large_star_count </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 20</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="13"><span style="color:#CAD3F5">    tiny_star_count </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 300</span></span>
<span class="code-line numbered-code-line" data-line-number="14"><span style="color:#939AB7">  &#125;</span><span style="color:#8BD5CA">:</span><span style="color:#939AB7"> &#123;</span><span style="color:#CAD3F5;font-style:italic"> large_star_count</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">;</span><span style="color:#CAD3F5;font-style:italic"> tiny_star_count</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7"> &#125;</span><span style="color:#8BD5CA"> =</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">props</span><span style="color:#CAD3F5">()</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="15"></span>
<span class="code-line numbered-code-line" data-line-number="16"><span style="color:#6E738D;font-style:italic">  // random numbers</span></span>
<span class="code-line numbered-code-line" data-line-number="17"><span style="color:#C6A0F6">  const</span><span style="color:#8AADF4;font-style:italic"> random</span><span style="color:#8BD5CA"> =</span><span style="color:#939AB7"> (</span><span style="color:#EE99A0;font-style:italic">min</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">,</span><span style="color:#EE99A0;font-style:italic"> max</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="18"><span style="color:#C6A0F6">    const</span><span style="color:#CAD3F5"> randomValue </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#CAD3F5">() </span><span style="color:#8BD5CA">*</span><span style="color:#CAD3F5"> (max </span><span style="color:#8BD5CA">-</span><span style="color:#CAD3F5"> min) </span><span style="color:#8BD5CA">+</span><span style="color:#CAD3F5"> min</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="19"><span style="color:#C6A0F6">    return</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">round</span><span style="color:#CAD3F5">(randomValue </span><span style="color:#8BD5CA">*</span><span style="color:#F5A97F"> 100</span><span style="color:#CAD3F5">) </span><span style="color:#8BD5CA">/</span><span style="color:#F5A97F"> 100</span><span style="color:#939AB7">;</span><span style="color:#6E738D;font-style:italic"> // Rounds to two decimal places</span></span>
<span class="code-line numbered-code-line" data-line-number="20"><span style="color:#939AB7">  &#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="21"></span>
<span class="code-line numbered-code-line" data-line-number="22"><span style="color:#C6A0F6">  type</span><span style="color:#EED49F;font-style:italic"> StarData </span><span style="color:#8BD5CA">=</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="23"><span style="color:#CAD3F5;font-style:italic">    size</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="24"><span style="color:#CAD3F5;font-style:italic">    left</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="25"><span style="color:#CAD3F5;font-style:italic">    top</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> string</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="26"><span style="color:#CAD3F5;font-style:italic">    opacity</span><span style="color:#8BD5CA">?:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="27"><span style="color:#939AB7">  &#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="28"></span>
<span class="code-line numbered-code-line" data-line-number="29"><span style="color:#6E738D;font-style:italic">  // generate an array of random positions for the stars that are between 3000 x 1500</span></span>
<span class="code-line numbered-code-line" data-line-number="30"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> stars</span><span style="color:#8BD5CA">:</span><span style="color:#EED49F;font-style:italic"> StarData[] </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">state</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="31"><span style="color:#CAD3F5">    Array</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">from</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5"> length</span><span style="color:#8BD5CA">:</span><span style="color:#CAD3F5"> large_star_count </span><span style="color:#939AB7">&#125;</span><span style="color:#CAD3F5">)</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">map</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">()</span><span style="color:#8BD5CA"> =></span><span style="color:#CAD3F5"> (</span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="32"><span style="color:#CAD3F5">      size</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0.1</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">rem\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="33"><span style="color:#CAD3F5">      left</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 3000</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="34"><span style="color:#CAD3F5">      top</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1500</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="35"><span style="color:#CAD3F5">      opacity</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 1</span><span style="color:#6E738D;font-style:italic"> // big stars are always full brightness</span></span>
<span class="code-line numbered-code-line" data-line-number="36"><span style="color:#939AB7">    &#125;</span><span style="color:#CAD3F5">))</span></span>
<span class="code-line numbered-code-line" data-line-number="37"><span style="color:#CAD3F5">  )</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="38"></span>
<span class="code-line numbered-code-line" data-line-number="39"><span style="color:#6E738D;font-style:italic">  // generate an array of random positions for the tiny stars that are between 3000 x 1500</span></span>
<span class="code-line numbered-code-line" data-line-number="40"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> tiny_stars</span><span style="color:#8BD5CA">:</span><span style="color:#EED49F;font-style:italic"> StarData[] </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> $</span><span style="color:#8AADF4;font-style:italic">state</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="41"><span style="color:#CAD3F5">    Array</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">from</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5"> length</span><span style="color:#8BD5CA">:</span><span style="color:#CAD3F5"> tiny_star_count </span><span style="color:#939AB7">&#125;</span><span style="color:#CAD3F5">)</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">map</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">()</span><span style="color:#8BD5CA"> =></span><span style="color:#CAD3F5"> (</span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="42"><span style="color:#CAD3F5">      left</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 3000</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="43"><span style="color:#CAD3F5">      top</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1500</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="44"><span style="color:#CAD3F5">      size</span><span style="color:#8BD5CA">:</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0.1</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 0.15</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">rem\`</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="45"><span style="color:#CAD3F5">      opacity</span><span style="color:#8BD5CA">:</span><span style="color:#8AADF4;font-style:italic"> random</span><span style="color:#CAD3F5">(</span><span style="color:#F5A97F">0.5</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1</span><span style="color:#CAD3F5">)</span></span>
<span class="code-line numbered-code-line" data-line-number="46"><span style="color:#939AB7">    &#125;</span><span style="color:#CAD3F5">))</span></span>
<span class="code-line numbered-code-line" data-line-number="47"><span style="color:#CAD3F5">  )</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="48"></span>
<span class="code-line numbered-code-line" data-line-number="49"><span style="color:#6E738D;font-style:italic">  // a function to make sure our stars aren't too close together</span></span>
<span class="code-line numbered-code-line" data-line-number="50"><span style="color:#C6A0F6">  const</span><span style="color:#8AADF4;font-style:italic"> check_star_positions</span><span style="color:#8BD5CA"> =</span><span style="color:#939AB7"> (</span><span style="color:#EE99A0;font-style:italic">stars</span><span style="color:#8BD5CA">:</span><span style="color:#EED49F;font-style:italic"> StarData[]</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="51"><span style="color:#C6A0F6">    let</span><span style="color:#CAD3F5"> max_attempts </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 10</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="52"><span style="color:#C6A0F6">    let</span><span style="color:#CAD3F5"> threshold </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 150</span><span style="color:#939AB7">;</span><span style="color:#6E738D;font-style:italic"> // the minimum distance between big stars</span></span>
<span class="code-line numbered-code-line" data-line-number="53"></span>
<span class="code-line numbered-code-line" data-line-number="54"><span style="color:#C6A0F6">    return</span><span style="color:#CAD3F5"> stars</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">map</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">(</span><span style="color:#EE99A0;font-style:italic">star</span><span style="color:#939AB7">,</span><span style="color:#EE99A0;font-style:italic"> index</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="55"><span style="color:#C6A0F6">      let</span><span style="color:#CAD3F5"> new_star </span><span style="color:#8BD5CA">=</span><span style="color:#939AB7"> &#123;</span><span style="color:#8BD5CA"> ...</span><span style="color:#CAD3F5">star </span><span style="color:#939AB7">&#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="56"><span style="color:#C6A0F6">      let</span><span style="color:#CAD3F5"> attempts </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 0</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="57"></span>
<span class="code-line numbered-code-line" data-line-number="58"><span style="color:#C6A0F6">      while</span><span style="color:#CAD3F5"> (attempts </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> max_attempts) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="59"><span style="color:#C6A0F6">        let</span><span style="color:#CAD3F5"> too_close </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> false</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="60"></span>
<span class="code-line numbered-code-line" data-line-number="61"><span style="color:#C6A0F6">        for</span><span style="color:#CAD3F5"> (</span><span style="color:#C6A0F6">let</span><span style="color:#CAD3F5"> i </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 0</span><span style="color:#939AB7">;</span><span style="color:#CAD3F5"> i </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> stars</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">length</span><span style="color:#939AB7">;</span><span style="color:#CAD3F5"> i</span><span style="color:#8BD5CA">++</span><span style="color:#CAD3F5">) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="62"><span style="color:#C6A0F6">          if</span><span style="color:#CAD3F5"> (i </span><span style="color:#8BD5CA">!==</span><span style="color:#CAD3F5"> index) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="63"><span style="color:#C6A0F6">            const</span><span style="color:#CAD3F5"> other_star </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> stars[i]</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="64"><span style="color:#C6A0F6">            const</span><span style="color:#CAD3F5"> distance </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">sqrt</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="65"><span style="color:#CAD3F5">              Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">pow</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="66"><span style="color:#8AADF4;font-style:italic">                Number</span><span style="color:#CAD3F5">(new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">)) </span><span style="color:#8BD5CA">-</span><span style="color:#8AADF4;font-style:italic"> Number</span><span style="color:#CAD3F5">(other_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="67"><span style="color:#F5A97F">                2</span></span>
<span class="code-line numbered-code-line" data-line-number="68"><span style="color:#CAD3F5">              ) </span><span style="color:#8BD5CA">+</span></span>
<span class="code-line numbered-code-line" data-line-number="69"><span style="color:#CAD3F5">                Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">pow</span><span style="color:#CAD3F5">(</span><span style="color:#8AADF4;font-style:italic">Number</span><span style="color:#CAD3F5">(new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">)) </span><span style="color:#8BD5CA">-</span><span style="color:#8AADF4;font-style:italic"> Number</span><span style="color:#CAD3F5">(other_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 2</span><span style="color:#CAD3F5">)</span></span>
<span class="code-line numbered-code-line" data-line-number="70"><span style="color:#CAD3F5">            )</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="71"></span>
<span class="code-line numbered-code-line" data-line-number="72"><span style="color:#C6A0F6">            if</span><span style="color:#CAD3F5"> (distance </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> threshold) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="73"><span style="color:#CAD3F5">              too_close </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> true</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="74"><span style="color:#C6A0F6">              break</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="75"><span style="color:#939AB7">            &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="76"><span style="color:#939AB7">          &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="77"><span style="color:#939AB7">        &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="78"></span>
<span class="code-line numbered-code-line" data-line-number="79"><span style="color:#C6A0F6">        if</span><span style="color:#CAD3F5"> (</span><span style="color:#8BD5CA">!</span><span style="color:#CAD3F5">too_close) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="80"><span style="color:#C6A0F6">          break</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="81"><span style="color:#939AB7">        &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="82"></span>
<span class="code-line numbered-code-line" data-line-number="83"><span style="color:#6E738D;font-style:italic">        // Reposition star</span></span>
<span class="code-line numbered-code-line" data-line-number="84"><span style="color:#CAD3F5">        new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 3000</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="85"><span style="color:#CAD3F5">        new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1500</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="86"><span style="color:#CAD3F5">        attempts</span><span style="color:#8BD5CA">++</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="87"><span style="color:#939AB7">      &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="88"></span>
<span class="code-line numbered-code-line" data-line-number="89"><span style="color:#C6A0F6">      return</span><span style="color:#CAD3F5"> new_star</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="90"><span style="color:#939AB7">    &#125;</span><span style="color:#CAD3F5">)</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="91"><span style="color:#939AB7">  &#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="92"></span>
<span class="code-line numbered-code-line" data-line-number="93"><span style="color:#6E738D;font-style:italic">  // check to see if stars are in the viewbox, so we can unrender the dom elements if they arent</span></span>
<span class="code-line numbered-code-line" data-line-number="94"><span style="color:#C6A0F6">  const</span><span style="color:#8AADF4;font-style:italic"> in_view_box</span><span style="color:#8BD5CA"> =</span><span style="color:#939AB7"> (</span><span style="color:#EE99A0;font-style:italic">star</span><span style="color:#8BD5CA">:</span><span style="color:#EED49F;font-style:italic"> StarData</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="95"><span style="color:#C6A0F6">    if</span><span style="color:#CAD3F5"> (</span><span style="color:#8BD5CA">!</span><span style="color:#CAD3F5">browser) </span><span style="color:#C6A0F6">return</span><span style="color:#F5A97F"> true</span><span style="color:#939AB7">;</span><span style="color:#6E738D;font-style:italic"> // we don't need to check this on the server</span></span>
<span class="code-line numbered-code-line" data-line-number="96"><span style="color:#C6A0F6">    const</span><span style="color:#CAD3F5"> left </span><span style="color:#8BD5CA">=</span><span style="color:#8AADF4;font-style:italic"> Number</span><span style="color:#CAD3F5">(star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="97"><span style="color:#C6A0F6">    const</span><span style="color:#CAD3F5"> top </span><span style="color:#8BD5CA">=</span><span style="color:#8AADF4;font-style:italic"> Number</span><span style="color:#CAD3F5">(star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="98"><span style="color:#C6A0F6">    return</span><span style="color:#CAD3F5"> left </span><span style="color:#8BD5CA">></span><span style="color:#F5A97F"> 0</span><span style="color:#8BD5CA"> &#x26;&#x26;</span><span style="color:#CAD3F5"> left </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> width </span><span style="color:#8BD5CA">&#x26;&#x26;</span><span style="color:#CAD3F5"> top </span><span style="color:#8BD5CA">></span><span style="color:#F5A97F"> 0</span><span style="color:#8BD5CA"> &#x26;&#x26;</span><span style="color:#CAD3F5"> top </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> height</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="99"><span style="color:#939AB7">  &#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="100"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">script</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="101"></span>
<span class="code-line numbered-code-line" data-line-number="102"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#C6A0F6">svelte:</span><span style="color:#8AADF4">window</span><span style="color:#C6A0F6"> bind:</span><span style="color:#EED49F;font-style:italic">innerWidth</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">width</span><span style="color:#939AB7">&#125;</span><span style="color:#C6A0F6"> bind:</span><span style="color:#EED49F;font-style:italic">innerHeight</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">height</span><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> /></span></span>
<span class="code-line numbered-code-line" data-line-number="103"></span>
<span class="code-line numbered-code-line" data-line-number="104"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">div</span><span style="color:#EED49F"> class</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"star-field"</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="105"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">#each</span><span style="color:#8AADF4;font-style:italic"> check_star_positions</span><span style="color:#CAD3F5">(stars) </span><span style="color:#C6A0F6">as</span><span style="color:#CAD3F5"> star</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="106"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">#if</span><span style="color:#8AADF4;font-style:italic"> in_view_box</span><span style="color:#CAD3F5">(star)</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="107"><span style="color:#8BD5CA">      &#x3C;</span><span style="color:#F5BDE6">Star</span><span style="color:#EED49F"> size</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> left</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> top</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> opacity</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">opacity</span><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> /></span></span>
<span class="code-line numbered-code-line" data-line-number="108"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">/if</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="109"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">/each</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="110"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">#each</span><span style="color:#CAD3F5"> tiny_stars </span><span style="color:#C6A0F6">as</span><span style="color:#CAD3F5"> star</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="111"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">#if</span><span style="color:#8AADF4;font-style:italic"> in_view_box</span><span style="color:#CAD3F5">(star)</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="112"><span style="color:#8BD5CA">      &#x3C;</span><span style="color:#F5BDE6">Star</span><span style="color:#EED49F"> size</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> left</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> top</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> opacity</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">opacity</span><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> /></span></span>
<span class="code-line numbered-code-line" data-line-number="113"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">/if</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="114"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">/each</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="115"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">div</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="116"></span>
<span class="code-line numbered-code-line" data-line-number="117"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">style</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="118"><span style="color:#939AB7">  .</span><span style="color:#EED49F">star-field</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="119"><span style="color:#8AADF4">    width</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 100%</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="120"><span style="color:#8AADF4">    height</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 100%</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="121"><span style="color:#8AADF4">    overflow</span><span style="color:#8BD5CA">:</span><span style="color:#CAD3F5"> hidden</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="122"><span style="color:#8AADF4">    z-index</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 1</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="123"><span style="color:#939AB7">  &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="124"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">style</span><span style="color:#8BD5CA">></span></span></code></pre> <p>The code should be pretty easy to understand if you are familiar with Svelte and some
minimal TypeScript. A few things to note:</p> <ul><li>I overrender stars on the server then double-check in the browser and remove DOM
elements that are not in the viewbox.</li> <li>The stars have a finite range of positions. I limit their container size so it’s not a
problem for me.</li> <li>I do a check on the large stars to make sure they are not too close together. I did this
in response to the stars overlapping and looking like a mess.</li> <li>The stars are generated with a random size and opacity within a range. I think the tiny
stars look especially nice when they have sub-pixel sizes. The browser does a great job
of rendering them.</li></ul> <h2 id="digging-into-the-code"><a aria-hidden="true" tabindex="-1" href="#digging-into-the-code"><span class="icon icon-link"></span></a>Digging Into the Code</h2> <pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#C6A0F6">let</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#CAD3F5">  large_star_count </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 20</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#CAD3F5">  tiny_star_count </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 300</span></span>
<span class="code-line numbered-code-line" data-line-number="4"><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA">:</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="5"><span style="color:#CAD3F5;font-style:italic">  large_star_count</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="6"><span style="color:#CAD3F5;font-style:italic">  tiny_star_count</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="7"><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> =</span><span style="color:#8AADF4;font-style:italic"> $props</span><span style="color:#CAD3F5">()</span><span style="color:#939AB7">;</span></span></code></pre> <p>Although the component is set up to receive the star counts as props, I am using the
defaults for my site.</p> <pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#6E738D;font-style:italic">// random numbers</span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#C6A0F6">const</span><span style="color:#8AADF4;font-style:italic"> random</span><span style="color:#8BD5CA"> =</span><span style="color:#939AB7"> (</span><span style="color:#EE99A0;font-style:italic">min</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">,</span><span style="color:#EE99A0;font-style:italic"> max</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA">:</span><span style="color:#C6A0F6"> number</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#C6A0F6">  const</span><span style="color:#CAD3F5"> randomValue </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#CAD3F5">() </span><span style="color:#8BD5CA">*</span><span style="color:#CAD3F5"> (max </span><span style="color:#8BD5CA">-</span><span style="color:#CAD3F5"> min) </span><span style="color:#8BD5CA">+</span><span style="color:#CAD3F5"> min</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="4"><span style="color:#C6A0F6">  return</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">round</span><span style="color:#CAD3F5">(randomValue </span><span style="color:#8BD5CA">*</span><span style="color:#F5A97F"> 100</span><span style="color:#CAD3F5">) </span><span style="color:#8BD5CA">/</span><span style="color:#F5A97F"> 100</span><span style="color:#939AB7">;</span><span style="color:#6E738D;font-style:italic"> // Rounds to two decimal places</span></span>
<span class="code-line numbered-code-line" data-line-number="5"><span style="color:#939AB7">&#125;;</span></span></code></pre> <p>I found that randomizing the stars with a function that rounds to two decimal places gave
a nice effect. I believe that <code>width</code>, <code>height</code>, <code>left</code>, and <code>top</code> are all values that can
handle sub-pixel values. This also helps with the effect.</p> <p>This is the last interesting part of the TypeScript. I use this to make sure the large
stars are not too close. Since the Big O complexity of this function is O(n²), I limit the
number of attempts to 10 and only with the large stars array. This is all basically
instant, so it’s not a problem.</p> <pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#6E738D;font-style:italic">// a function to make sure our stars aren't too close together</span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#C6A0F6">const</span><span style="color:#8AADF4;font-style:italic"> check_star_positions</span><span style="color:#8BD5CA"> =</span><span style="color:#939AB7"> (</span><span style="color:#EE99A0;font-style:italic">stars</span><span style="color:#8BD5CA">:</span><span style="color:#EED49F;font-style:italic"> StarData[]</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> max_attempts </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 10</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="4"><span style="color:#C6A0F6">  let</span><span style="color:#CAD3F5"> threshold </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 150</span><span style="color:#939AB7">;</span><span style="color:#6E738D;font-style:italic"> // the minimum distance between big stars</span></span>
<span class="code-line numbered-code-line" data-line-number="5"></span>
<span class="code-line numbered-code-line" data-line-number="6"><span style="color:#C6A0F6">  return</span><span style="color:#CAD3F5"> stars</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">map</span><span style="color:#CAD3F5">(</span><span style="color:#939AB7">(</span><span style="color:#EE99A0;font-style:italic">star</span><span style="color:#939AB7">,</span><span style="color:#EE99A0;font-style:italic"> index</span><span style="color:#939AB7">)</span><span style="color:#8BD5CA"> =></span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="7"><span style="color:#C6A0F6">    let</span><span style="color:#CAD3F5"> new_star </span><span style="color:#8BD5CA">=</span><span style="color:#939AB7"> &#123;</span><span style="color:#8BD5CA"> ...</span><span style="color:#CAD3F5">star </span><span style="color:#939AB7">&#125;;</span></span>
<span class="code-line numbered-code-line" data-line-number="8"><span style="color:#C6A0F6">    let</span><span style="color:#CAD3F5"> attempts </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 0</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="9"></span>
<span class="code-line numbered-code-line" data-line-number="10"><span style="color:#C6A0F6">    while</span><span style="color:#CAD3F5"> (attempts </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> max_attempts) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="11"><span style="color:#C6A0F6">      let</span><span style="color:#CAD3F5"> too_close </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> false</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="12"></span>
<span class="code-line numbered-code-line" data-line-number="13"><span style="color:#C6A0F6">      for</span><span style="color:#CAD3F5"> (</span><span style="color:#C6A0F6">let</span><span style="color:#CAD3F5"> i </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> 0</span><span style="color:#939AB7">;</span><span style="color:#CAD3F5"> i </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> stars</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">length</span><span style="color:#939AB7">;</span><span style="color:#CAD3F5"> i</span><span style="color:#8BD5CA">++</span><span style="color:#CAD3F5">) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="14"><span style="color:#C6A0F6">        if</span><span style="color:#CAD3F5"> (i </span><span style="color:#8BD5CA">!==</span><span style="color:#CAD3F5"> index) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="15"><span style="color:#C6A0F6">          const</span><span style="color:#CAD3F5"> other_star </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> stars[i]</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="16"><span style="color:#C6A0F6">          const</span><span style="color:#CAD3F5"> distance </span><span style="color:#8BD5CA">=</span><span style="color:#CAD3F5"> Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">sqrt</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="17"><span style="color:#CAD3F5">            Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">pow</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="18"><span style="color:#8AADF4;font-style:italic">              Number</span><span style="color:#CAD3F5">(new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">)) </span><span style="color:#8BD5CA">-</span></span>
<span class="code-line numbered-code-line" data-line-number="19"><span style="color:#8AADF4;font-style:italic">                Number</span><span style="color:#CAD3F5">(other_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="20"><span style="color:#F5A97F">              2</span></span>
<span class="code-line numbered-code-line" data-line-number="21"><span style="color:#CAD3F5">            ) </span><span style="color:#8BD5CA">+</span></span>
<span class="code-line numbered-code-line" data-line-number="22"><span style="color:#CAD3F5">              Math</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">pow</span><span style="color:#CAD3F5">(</span></span>
<span class="code-line numbered-code-line" data-line-number="23"><span style="color:#8AADF4;font-style:italic">                Number</span><span style="color:#CAD3F5">(new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">)) </span><span style="color:#8BD5CA">-</span></span>
<span class="code-line numbered-code-line" data-line-number="24"><span style="color:#8AADF4;font-style:italic">                  Number</span><span style="color:#CAD3F5">(other_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#8BD5CA">.</span><span style="color:#8AADF4;font-style:italic">replace</span><span style="color:#CAD3F5">(</span><span style="color:#A6DA95">"px"</span><span style="color:#939AB7">,</span><span style="color:#A6DA95"> ""</span><span style="color:#CAD3F5">))</span><span style="color:#939AB7">,</span></span>
<span class="code-line numbered-code-line" data-line-number="25"><span style="color:#F5A97F">                2</span></span>
<span class="code-line numbered-code-line" data-line-number="26"><span style="color:#CAD3F5">              )</span></span>
<span class="code-line numbered-code-line" data-line-number="27"><span style="color:#CAD3F5">          )</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="28"></span>
<span class="code-line numbered-code-line" data-line-number="29"><span style="color:#C6A0F6">          if</span><span style="color:#CAD3F5"> (distance </span><span style="color:#8BD5CA">&#x3C;</span><span style="color:#CAD3F5"> threshold) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="30"><span style="color:#CAD3F5">            too_close </span><span style="color:#8BD5CA">=</span><span style="color:#F5A97F"> true</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="31"><span style="color:#C6A0F6">            break</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="32"><span style="color:#939AB7">          &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="33"><span style="color:#939AB7">        &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="34"><span style="color:#939AB7">      &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="35"></span>
<span class="code-line numbered-code-line" data-line-number="36"><span style="color:#C6A0F6">      if</span><span style="color:#CAD3F5"> (</span><span style="color:#8BD5CA">!</span><span style="color:#CAD3F5">too_close) </span><span style="color:#939AB7">&#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="37"><span style="color:#C6A0F6">        break</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="38"><span style="color:#939AB7">      &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="39"></span>
<span class="code-line numbered-code-line" data-line-number="40"><span style="color:#6E738D;font-style:italic">      // Reposition star</span></span>
<span class="code-line numbered-code-line" data-line-number="41"><span style="color:#CAD3F5">      new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 3000</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="42"><span style="color:#CAD3F5">      new_star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top </span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95"> \`</span><span style="color:#939AB7">$&#123;</span><span style="color:#8AADF4;font-style:italic">random</span><span style="color:#A6DA95">(</span><span style="color:#F5A97F">0</span><span style="color:#939AB7">,</span><span style="color:#F5A97F"> 1500</span><span style="color:#A6DA95">)</span><span style="color:#939AB7">&#125;</span><span style="color:#A6DA95">px\`</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="43"><span style="color:#CAD3F5">      attempts</span><span style="color:#8BD5CA">++</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="44"><span style="color:#939AB7">    &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="45"></span>
<span class="code-line numbered-code-line" data-line-number="46"><span style="color:#C6A0F6">    return</span><span style="color:#CAD3F5"> new_star</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="47"><span style="color:#939AB7">  &#125;</span><span style="color:#CAD3F5">)</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="48"><span style="color:#939AB7">&#125;;</span></span></code></pre> <p>Like I said earlier in the article, the starfield would sometimes generate two large stars
that would overlap or be too close together. This function makes sure that doesn’t happen.
It looked pretty bad when it happened.</p> <p>The last part of the component is the rendering of the stars. I use the <code>in_view_box()</code> function to make sure the stars are in the viewbox. This only happens in the browser, so
it only removes unseen star elements from the DOM.</p> <pre class="shiki catppuccin-macchiato" style="background-color:#24273a;color:#cad3f5" tabindex="0"><code><span class="code-line numbered-code-line" data-line-number="1"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">div</span><span style="color:#EED49F"> class</span><span style="color:#8BD5CA">=</span><span style="color:#A6DA95">"star-field"</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="2"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">#each</span><span style="color:#8AADF4;font-style:italic"> check_star_positions</span><span style="color:#CAD3F5">(stars) </span><span style="color:#C6A0F6">as</span><span style="color:#CAD3F5"> star</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="3"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">#if</span><span style="color:#8AADF4;font-style:italic"> in_view_box</span><span style="color:#CAD3F5">(star)</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="4"><span style="color:#8BD5CA">      &#x3C;</span><span style="color:#F5BDE6">Star</span><span style="color:#EED49F"> size</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> left</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> top</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> opacity</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">opacity</span><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> /></span></span>
<span class="code-line numbered-code-line" data-line-number="5"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">/if</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="6"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">/each</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="7"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">#each</span><span style="color:#CAD3F5"> tiny_stars </span><span style="color:#C6A0F6">as</span><span style="color:#CAD3F5"> star</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="8"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">#if</span><span style="color:#8AADF4;font-style:italic"> in_view_box</span><span style="color:#CAD3F5">(star)</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="9"><span style="color:#8BD5CA">      &#x3C;</span><span style="color:#F5BDE6">Star</span><span style="color:#EED49F"> size</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">size</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> left</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">left</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> top</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">top</span><span style="color:#939AB7">&#125;</span><span style="color:#EED49F"> opacity</span><span style="color:#8BD5CA">=</span><span style="color:#939AB7">&#123;</span><span style="color:#CAD3F5">star</span><span style="color:#8BD5CA">.</span><span style="color:#CAD3F5">opacity</span><span style="color:#939AB7">&#125;</span><span style="color:#8BD5CA"> /></span></span>
<span class="code-line numbered-code-line" data-line-number="10"><span style="color:#939AB7">    &#123;</span><span style="color:#C6A0F6">/if</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="11"><span style="color:#939AB7">  &#123;</span><span style="color:#C6A0F6">/each</span><span style="color:#939AB7">&#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="12"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">div</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="13"></span>
<span class="code-line numbered-code-line" data-line-number="14"><span style="color:#8BD5CA">&#x3C;</span><span style="color:#8AADF4">style</span><span style="color:#8BD5CA">></span></span>
<span class="code-line numbered-code-line" data-line-number="15"><span style="color:#939AB7">  .</span><span style="color:#EED49F">star-field</span><span style="color:#939AB7"> &#123;</span></span>
<span class="code-line numbered-code-line" data-line-number="16"><span style="color:#8AADF4">    width</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 100%</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="17"><span style="color:#8AADF4">    height</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 100%</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="18"><span style="color:#8AADF4">    overflow</span><span style="color:#8BD5CA">:</span><span style="color:#CAD3F5"> hidden</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="19"><span style="color:#8AADF4">    z-index</span><span style="color:#8BD5CA">:</span><span style="color:#F5A97F"> 1</span><span style="color:#939AB7">;</span></span>
<span class="code-line numbered-code-line" data-line-number="20"><span style="color:#939AB7">  &#125;</span></span>
<span class="code-line numbered-code-line" data-line-number="21"><span style="color:#8BD5CA">&#x3C;/</span><span style="color:#8AADF4">style</span><span style="color:#8BD5CA">></span></span></code></pre> <h2 id="conclusion"><a aria-hidden="true" tabindex="-1" href="#conclusion"><span class="icon icon-link"></span></a>Conclusion</h2> <p>Thanks for sticking around! This post not only helped me build the site but also
solidified my approach to creating and sharing content. I’m thrilled to continue
developing and can’t wait to share more with you soon.</p> <p>Also, huge shoutout to <a href="https://joyofcode.xyz">Joy of Code</a>, I used his blog as a starting
point for how to render markdown/handle code blocks in SvelteKit. I’m excited to see what
he does next.</p> <p>If you have any questions or comments, feel free to reach out to me on <a href="https://bsky.app/profile/jovianmoon.io">BlueSky</a>.</p>`,1);function q(a){var s=I(),n=A(E(s),14);S(n),g(52),r(a,s)}export{q as default,N as metadata};
